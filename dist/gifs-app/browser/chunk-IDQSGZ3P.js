import{H as G,J as y,O as d,a as c,b as g,eb as f,fa as s,fb as l,o as h,rb as u}from"./chunk-26RWJC6K.js";var o={production:!0,companyName:"Gifs",companyName2:"App",companySlogan:"Maneja tus gifs",apiKey:"4C8RsO12Utth64p7I1cNqAgFmaIz0SSf",giphyUrl:"https://api.giphy.com/v1"};var n=class{static mapGiphyItemToGif(t){return{id:t.id,title:t.title,url:t.images.original.url}}static mapGiphyItemToGifArray(t){return t.map(this.mapGiphyItemToGif)}};var H="gifs",v=()=>{let r=localStorage.getItem(H)??"{}";return JSON.parse(r)},I=class r{http=d(u);trendingGifs=s([]);trendingGifsLoading=s(!1);trendingPage=s(0);searchHistory=s(v());searchHistoryKeys=f(()=>Object.keys(this.searchHistory()));trendingGifGroup=f(()=>{let t=[];for(let i=0;i<this.trendingGifs().length;i+=3)t.push(this.trendingGifs().slice(i,i+3));return t});saveLocalHistory=l(()=>{let t=JSON.stringify(this.searchHistory());localStorage.setItem(H,t)});constructor(){this.loadTrendingGifs()}loadTrendingGifs(){let i="g",m=this.trendingPage()*20;this.trendingGifsLoading()||(this.trendingGifsLoading.set(!0),this.http.get(`${o.giphyUrl}/gifs/trending`,{params:{api_key:o.apiKey,limit:20,rating:i,offset:m}}).subscribe(e=>{let a=n.mapGiphyItemToGifArray(e.data);this.trendingGifs.update(p=>[...p,...a]),this.trendingPage.update(p=>p+1),this.trendingGifsLoading.set(!1)}))}searchGifs(t){return this.http.get(`${o.giphyUrl}/gifs/search`,{params:{api_key:o.apiKey,limit:25,rating:"g",q:t.trim()}}).pipe(h(({data:e})=>n.mapGiphyItemToGifArray(e)),G(e=>{this.searchHistory.update(a=>g(c({},a),{[t.toLowerCase().trim()]:e}))}))}getHistoryGifs(t){return this.searchHistory()[t]??=[]}static \u0275fac=function(i){return new(i||r)};static \u0275prov=y({token:r,factory:r.\u0275fac,providedIn:"root"})};export{o as a,I as b};
